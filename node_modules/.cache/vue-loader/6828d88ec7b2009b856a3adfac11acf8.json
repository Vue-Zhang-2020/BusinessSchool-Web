{"remainingRequest":"D:\\个人成长经历\\锐名科技\\产品开发\\PigeonRacing\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\个人成长经历\\锐名科技\\产品开发\\PigeonRacing\\vue-admin-template\\src\\views\\material\\check-template.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\个人成长经历\\锐名科技\\产品开发\\PigeonRacing\\vue-admin-template\\src\\views\\material\\check-template.vue","mtime":1588748366515},{"path":"D:\\个人成长经历\\锐名科技\\产品开发\\PigeonRacing\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\个人成长经历\\锐名科技\\产品开发\\PigeonRacing\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\个人成长经历\\锐名科技\\产品开发\\PigeonRacing\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\个人成长经历\\锐名科技\\产品开发\\PigeonRacing\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      pageSize: 6,\r\n      total: 6, // task总数\r\n      srcList: [],\r\n      tableData: [],\r\n      keyword: \"\",\r\n      headers: {\r\n        token: localStorage.getItem(\"token\")\r\n      }\r\n    };\r\n  },\r\n  created: function() {\r\n    this.getTemplateList();\r\n  },\r\n  methods: {\r\n    imgClick(imgUrl) {\r\n      this.srcList = [imgUrl];\r\n    },\r\n\r\n    getTemplateList(page = 1, limit = 6) {\r\n      let that = this;\r\n      this.req({\r\n        url: `getTemplateList?page=${page}&limit=${limit}`,\r\n        data: {},\r\n        method: \"GET\"\r\n      }).then(\r\n        res => {\r\n          console.log(\"res :\", res);\r\n          that.total = res.data.total;\r\n          let tableData = res.data.data;\r\n          for (let i = 0; i < tableData.length; i++) {\r\n            tableData[i].createDate = that.getTime(tableData[i].createDate);\r\n          }\r\n          that.tableData = tableData;\r\n        },\r\n        err => {\r\n          console.log(\"err :\", err);\r\n        }\r\n      );\r\n    },\r\n    goSearch() {\r\n      let that = this;\r\n      if (that.keyword.length < 1) {\r\n        that.getTemplateList();\r\n        return 0;\r\n      }\r\n      this.req({\r\n        url: \"searchTemplate?keyword=\" + that.keyword,\r\n        data: {},\r\n        method: \"GET\"\r\n      }).then(\r\n        res => {\r\n          console.log(\"res :\", res);\r\n          if (res.data.length < 1) {\r\n            that.$message(\"查询无果~\");\r\n            return 0;\r\n          } else {\r\n            that.$message(\"查询成功~\");\r\n          }\r\n          for (let i = 0; i < res.data.length; i++) {\r\n            res.data[i].createDate = that.getTime(res.data[i].createDate);\r\n          }\r\n          that.tableData = res.data;\r\n        },\r\n        err => {\r\n          console.log(\"err :\", err);\r\n        }\r\n      );\r\n    },\r\n    deleteTemplate(id) {\r\n      let that = this;\r\n      this.$confirm(\"此操作将删除该文件, 是否继续?\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\"\r\n      })\r\n        .then(() => {\r\n          that\r\n            .req({\r\n              url: \"deleteTemplate?id=\" + id,\r\n              data: {},\r\n              method: \"GET\"\r\n            })\r\n            .then(\r\n              res => {\r\n                console.log(\"res :\", res);\r\n                that.getTemplateList();\r\n                that.$message(\"删除成功~\");\r\n              },\r\n              err => {\r\n                console.log(\"err :\", err);\r\n              }\r\n            );\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: \"已取消删除\"\r\n          });\r\n        });\r\n    },\r\n    downloadTemplate(imgUrl) {},\r\n    uploadSuccess(response, file, fileList) {\r\n      let that = this;\r\n      console.log(\":\", response);\r\n      this.$message(\"上传成功~\");\r\n      this.$prompt(\"请输入模板名称\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\"\r\n      })\r\n        .then(({ value }) => {\r\n          that\r\n            .req({\r\n              url: \"addTemplate\",\r\n              data: {\r\n                name: value,\r\n                imgUrl: response.data,\r\n                createDate: new Date().getTime()\r\n              },\r\n              method: \"POST\"\r\n            })\r\n            .then(\r\n              res => {\r\n                console.log(\"res :\", res);\r\n                that.getTemplateList();\r\n              },\r\n              err => {\r\n                console.log(\"err :\", err);\r\n              }\r\n            );\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: \"取消上传\"\r\n          });\r\n        });\r\n    },\r\n    getTime(timestamp) {\r\n      let that = this;\r\n      timestamp = parseInt(timestamp);\r\n      var date = new Date(timestamp); //时间戳为10位需*1000，时间戳为13位的话不需乘1000\r\n      let Y = date.getFullYear() + \"-\";\r\n      let M =\r\n        (date.getMonth() + 1 < 10\r\n          ? \"0\" + (date.getMonth() + 1)\r\n          : date.getMonth() + 1) + \"-\";\r\n      let D = that.change(date.getDate()) + \" \";\r\n      let h = that.change(date.getHours()) + \":\";\r\n      let m = that.change(date.getMinutes()) + \":\";\r\n      let s = that.change(date.getSeconds());\r\n      return Y + M + D + h + m + s;\r\n    },\r\n    change(t) {\r\n      if (t < 10) {\r\n        return \"0\" + t;\r\n      } else {\r\n        return t;\r\n      }\r\n    },\r\n    // 下载文件\r\n    downloadFile(name, href) {\r\n      console.log(\"name :\", name);\r\n      console.log(\"href :\", href);\r\n      let a = document.createElement(\"a\"), //创建a标签\r\n        e = document.createEvent(\"MouseEvents\"); //创建鼠标事件对象\r\n      e.initEvent(\"click\", false, false); //初始化事件对象\r\n      a.href = href; //设置下载地址\r\n      a.download = name; //设置下载文件名\r\n      a.dispatchEvent(e); //给指定的元素，执行事件click事件\r\n    },\r\n    pageChange(page) {\r\n      console.log(\"page :\", page);\r\n      this.getTemplateList(page);\r\n    }\r\n  }\r\n};\r\n",null]}