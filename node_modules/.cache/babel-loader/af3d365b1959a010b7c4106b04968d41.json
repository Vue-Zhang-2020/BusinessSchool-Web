{"remainingRequest":"D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\node_modules\\babel-loader\\lib\\index.js!D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\src\\views\\school_port\\school\\school_class_manager.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\src\\views\\school_port\\school\\school_class_manager.vue","mtime":1594369963550},{"path":"D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: 'major',\n  data: function data() {\n    return {\n      schoolId: 0,\n      // 学校Id\n      calssesId: 0,\n      // 班级Id\n      classesJsonData: [],\n      // 班级列表数据\n      majorOptions: [],\n      // 专业下拉框\n      tableData: [{\n        date: '2016-05-02',\n        name: '王小虎',\n        address: '上海市普陀区金沙江路 1518 弄'\n      }, {\n        date: '2016-05-04',\n        name: '王小虎',\n        address: '上海市普陀区金沙江路 1517 弄'\n      }, {\n        date: '2016-05-01',\n        name: '王小虎',\n        address: '上海市普陀区金沙江路 1519 弄'\n      }, {\n        date: '2016-05-03',\n        name: '王小虎',\n        address: '上海市普陀区金沙江路 1516 弄'\n      }],\n      total: 0,\n      currentPage: 1,\n      pagesize: 5,\n      deleteDialog: false,\n      insertDialog: false,\n      insertOrModifyModel: 0,\n      // 0 添加 1 编辑\n      formLabelWidth: '120px',\n      classForm: {\n        classId: '',\n        className: '',\n        classMajor: '',\n        classPerson: ''\n      },\n      rules: {\n        className: [{\n          required: true,\n          message: '请输入班级名称',\n          trigger: 'blur'\n        }],\n        classMajor: [{\n          required: true,\n          message: '请选择班级专业',\n          trigger: 'change'\n        }],\n        classPerson: [{\n          required: true,\n          message: '请输入班级人数',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  created: function created() {\n    this.schoolId = this.$store.getters.schoolId;\n    this.requestClassesJsonData();\n  },\n  methods: {\n    handleSizeChange: function handleSizeChange(val) {\n      this.requestClassesJsonData();\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.requestClassesJsonData();\n    },\n    // 显示添加Dialog\n    showInserModal: function showInserModal(index, row, flag) {\n      this.insertOrModifyModel = flag;\n\n      if (flag === 1) {\n        this.classForm.classId = row.id;\n        this.classForm.className = row.classname;\n        this.classForm.classMajor = row.classnum;\n        this.classForm.classPerson = row.proname;\n      } else {\n        this.requestMajorJsonData();\n      }\n\n      this.insertDialog = true;\n    },\n    // 显示删除Dialog\n    showDeleteModal: function showDeleteModal(index, row) {\n      this.calssesId = row.id;\n      this.deleteDialog = true;\n    },\n    // 提交\n    submitForm: function submitForm(formName) {\n      var _this = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          if (_this.insertOrModifyModel === 0) {\n            _this.insertClassesApi(formName);\n          } else {\n            _this.modifyClassesApi(formName);\n          }\n        } else {\n          return false;\n        }\n      });\n    },\n    // 获取班级列表\n    requestClassesJsonData: function requestClassesJsonData() {\n      var _this2 = this;\n\n      this.$axios.post(this.$global.sApi + '/listclass', JSON.stringify({\n        'current_page': this.currentPage,\n        'perpage': this.pagesize,\n        'scinfoid': this.schoolId\n      })).then(function (res) {\n        var json = res.data.data.data;\n        _this2.total = res.data.data.total;\n\n        if (json.length > 0) {\n          _this2.classesJsonData = json;\n        }\n      });\n    },\n    // 添加班级\n    insertClassesApi: function insertClassesApi(formName) {\n      var _this3 = this;\n\n      this.$axios.post(this.$global.sApi + '/addclass', JSON.stringify({\n        'scinfoid': this.schoolId,\n        'classname': this.classForm.className,\n        'classnum': parseInt(this.classForm.classPerson),\n        'proinfoid': parseInt(this.classForm.classMajor),\n        'type': 1\n      })).then(function (res) {\n        _this3.insertDialog = false;\n\n        _this3.$refs[formName].resetFields();\n\n        _this3.$message({\n          message: '添加成功',\n          type: 'success'\n        });\n\n        _this3.requestClassesJsonData();\n      });\n    },\n    // 编辑班级\n    modifyClassesApi: function modifyClassesApi(formName) {\n      var _this4 = this;\n\n      this.$axios.post(this.$global.sApi + '/uppro', JSON.stringify({\n        'classid': this.classForm.classId,\n        'classname': this.classForm.className,\n        'classnum': parseInt(this.classForm.classPerson),\n        'proname': parseInt(this.classForm.classMajor),\n        'type': 2\n      })).then(function (res) {\n        console.log(res);\n        _this4.insertDialog = false;\n        _this4.classForm = {};\n\n        _this4.$refs[formName].resetFields();\n\n        _this4.$message({\n          message: '编辑成功',\n          type: 'success'\n        });\n\n        _this4.requestClassesJsonData();\n      });\n    },\n    // 删除班级\n    deleteClasses: function deleteClasses() {\n      var _this5 = this;\n\n      this.$axios.post(this.$global.sApi + '/addclass', JSON.stringify({\n        'classid': this.calssesId,\n        'type': 3\n      })).then(function (res) {\n        _this5.deleteDialog = false;\n\n        _this5.$message({\n          message: '删除成功',\n          type: 'success'\n        });\n\n        _this5.requestClassesJsonData();\n      });\n    },\n    // 获取专业列表\n    requestMajorJsonData: function requestMajorJsonData() {\n      var _this6 = this;\n\n      this.$axios.post(this.$global.sApi + '/prolistall', JSON.stringify({\n        'scinfoid': this.schoolId\n      })).then(function (res) {\n        var json = res.data.data[0];\n\n        if (json.length > 0) {\n          _this6.majorOptions = json;\n        }\n      });\n    }\n  }\n};\nexports.default = _default;",null]}