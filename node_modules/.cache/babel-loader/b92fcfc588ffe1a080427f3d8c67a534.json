{"remainingRequest":"D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\node_modules\\babel-loader\\lib\\index.js!D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\src\\views\\business_port\\teaching\\teaching_plan\\teaching_medal_manager.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\src\\views\\business_port\\teaching\\teaching_plan\\teaching_medal_manager.vue","mtime":1594450606546},{"path":"D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.function.name\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: '',\n  data: function data() {\n    return {\n      total: 4,\n      currentPage: 1,\n      pagesize: 5,\n      deleteMedalId: '',\n      medalSearch: '',\n      formLabelWidth: '120px',\n      insertOrModifyModel: 0,\n      // 0 新增 1 编辑\n      insertOrModifyDialog: false,\n      deleteDialog: false,\n      medalJsonData: [],\n      medalForm: {\n        medalId: '',\n        medalName: '',\n        medalImg: ''\n      },\n      gridData: [{\n        date: '2016-05-02',\n        name: '王小虎',\n        address: '上海市普陀区金沙江路 1518 弄'\n      }, {\n        date: '2016-05-04',\n        name: '王小虎',\n        address: '上海市普陀区金沙江路 1518 弄'\n      }, {\n        date: '2016-05-01',\n        name: '王小虎',\n        address: '上海市普陀区金沙江路 1518 弄'\n      }, {\n        date: '2016-05-03',\n        name: '王小虎',\n        address: '上海市普陀区金沙江路 1518 弄'\n      }]\n    };\n  },\n  created: function created() {\n    this.requestMedalJsonData();\n  },\n  methods: {\n    handleSizeChange: function handleSizeChange(val) {},\n    handleCurrentChange: function handleCurrentChange(val) {},\n    // 搜索\n    searchMedal: function searchMedal() {\n      this.requestSearchMedalJsonData();\n    },\n    showDeleteModal: function showDeleteModal(index, row) {\n      this.deleteMedalId = row.id;\n      this.deleteDialog = true;\n    },\n    showInserModal: function showInserModal(index, row, flag) {\n      this.insertOrModifyModel = flag;\n\n      if (this.insertOrModifyModel === 1) {\n        this.medalForm.medalId = row.id;\n        this.medalForm.medalName = row.name;\n        this.medalForm.medalImg = row.head;\n      }\n\n      this.insertOrModifyDialog = true;\n    },\n    // 列表\n    requestMedalJsonData: function requestMedalJsonData() {\n      var _this = this;\n\n      this.$axios.post(this.$global.sApi + '/addexz', JSON.stringify({\n        'type': 4,\n        'current_page': this.currentPage,\n        'perpage': this.pagesize\n      })).then(function (res) {\n        _this.total = res.data.data.total;\n        _this.medalJsonData = res.data.data.data;\n      });\n    },\n    // 搜索\n    requestSearchMedalJsonData: function requestSearchMedalJsonData() {\n      var _this2 = this;\n\n      this.$axios.post(this.$global.sApi + '/addexz', JSON.stringify({\n        'type': 5,\n        'xzname': this.medalSearch\n      })).then(function (res) {\n        console.log(res.data.data[0]);\n        _this2.total = res.data.data.total;\n        _this2.medalJsonData = res.data.data[0];\n      });\n    },\n    // 前端校验文件上传是否符合条件\n    file_info_check: function file_info_check(file) {\n      var ret = '';\n\n      if (file === undefined) {\n        ret = '';\n      } // eslint-disable-next-line camelcase\n\n\n      var max_file_size = 2 * 1024 * 1024; // eslint-disable-next-line camelcase\n\n      if (file.size > max_file_size) {\n        ret = '文件不能大于2Mb';\n      }\n\n      var typeJpg = '.jpg';\n      var typeJpeg = '.jpeg';\n      var typePng = '.png';\n\n      if (file.name.indexOf(typeJpg) === -1) {\n        ret = '文件格式要求是.jpg/.jpeg/.png';\n      } else {\n        ret = 'success';\n        return ret;\n      }\n\n      if (file.name.indexOf(typeJpeg) === -1) {\n        ret = '文件格式要求是.jpg/.jpeg/.png';\n      } else {\n        ret = 'success';\n        return ret;\n      }\n\n      if (file.name.indexOf(typePng) === -1) {\n        ret = '文件格式要求是.jpg/.jpeg/.png';\n      } else {\n        ret = 'success';\n        return ret;\n      }\n\n      return ret;\n    },\n    uploadImg: function uploadImg(fileObj) {\n      var _this3 = this;\n\n      this.loading = true;\n      var fileStatus = this.file_info_check(fileObj.file);\n\n      if (fileStatus === 'success') {\n        var formData = new FormData();\n        formData.append('file', fileObj.file);\n        this.$axios.post('/upschead', formData, {\n          headers: {\n            'Content-type': 'multipart/form-data'\n          }\n        }).then(function (res) {\n          // this.registerForm.imageUrl = res\n          _this3.$message({\n            message: '提交成功',\n            type: 'success'\n          });\n\n          _this3.medalForm.medalImg = res.data.path;\n          _this3.loading = false;\n        });\n      } else {\n        this.$message({\n          message: fileStatus,\n          type: 'error'\n        });\n      }\n    },\n    submitForm: function submitForm(formName) {\n      var _this4 = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          if (_this4.insertOrModifyModel === 0) {\n            _this4.insertMedal(formName);\n          } else {\n            _this4.modifyMedal(formName);\n          }\n        }\n      });\n    },\n    // 添加勋章\n    insertMedal: function insertMedal(formName) {\n      var _this5 = this;\n\n      this.$axios.post(this.$global.sApi + '/addexz', JSON.stringify({\n        'type': 1,\n        'head': this.medalForm.medalImg,\n        'name': this.medalForm.medalName\n      })).then(function (res) {\n        _this5.$message({\n          message: '添加成功',\n          type: 'success'\n        });\n\n        _this5.insertOrModifyDialog = false;\n\n        _this5.$refs[formName].resetFields();\n\n        _this5.requestMedalJsonData();\n      });\n    },\n    // 编辑勋章\n    modifyMedal: function modifyMedal() {\n      var _this6 = this;\n\n      this.$axios.post(this.$global.sApi + '/addexz', JSON.stringify({\n        'type': 2,\n        'id': parseInt(this.medalForm.medalId),\n        'head': this.medalForm.medalImg,\n        'name': this.medalForm.medalName\n      })).then(function (res) {\n        _this6.requestMedalJsonData();\n\n        _this6.$message({\n          message: '编辑成功',\n          type: 'success'\n        });\n\n        _this6.insertOrModifyDialog = false;\n        _this6.medalForm = {};\n\n        _this6.$refs[formName].resetFields();\n      });\n    },\n    // 删除勋章\n    deleteMedal: function deleteMedal() {\n      var _this7 = this;\n\n      this.$axios.post(this.$global.sApi + '/addexz', JSON.stringify({\n        'type': 3,\n        'id': parseInt(this.deleteMedalId)\n      })).then(function (res) {\n        _this7.requestMedalJsonData();\n\n        _this7.$message({\n          message: '删除成功',\n          type: 'success'\n        });\n\n        _this7.deleteDialog = false;\n      });\n    }\n  }\n};\nexports.default = _default;",null]}