{"remainingRequest":"D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\node_modules\\babel-loader\\lib\\index.js!D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\src\\views\\business_port\\unit\\cooperator_unit.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\src\\views\\business_port\\unit\\cooperator_unit.vue","mtime":1594378524036},{"path":"D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\个人成长经历\\锐名科技\\产品开发\\商管院\\BusinessSchool-Web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: '',\n  data: function data() {\n    return {\n      total: 0,\n      currentPage: 1,\n      pagesize: 5,\n      insertDialog: false,\n      lookDialog: false,\n      formLabelWidth: '110px',\n      insertOrModifyModel: 0,\n      // 0 insert 1 modify\n      unitForm: {\n        unitId: '',\n        unitImg: '',\n        unitName: '',\n        unitManager: '',\n        unitScale: '',\n        unitMsg: '',\n        unitAccount: '',\n        unitPassword: ''\n      },\n      rules: {\n        unitName: [{\n          required: true,\n          message: '请输入企业名称',\n          trigger: 'blur'\n        }],\n        unitManager: [{\n          required: true,\n          message: '请输入主要经营',\n          trigger: 'blur'\n        }],\n        unitScale: [{\n          required: true,\n          message: '请输入规模',\n          trigger: 'blur'\n        }],\n        unitAccount: [{\n          required: true,\n          message: '请输入初始账号',\n          trigger: 'blur'\n        }],\n        unitPassword: [{\n          required: true,\n          message: '请输入初始密码',\n          trigger: 'blur'\n        }]\n      },\n      classesJsonData: [] // 班级列表数据\n\n    };\n  },\n  watch: {\n    lookDialog: function lookDialog(old) {\n      if (!old) {\n        this.unitForm = {};\n      }\n    },\n    insertDialog: function insertDialog(old) {\n      if (!old) {\n        this.unitForm = {};\n      }\n    }\n  },\n  created: function created() {\n    this.schoolId = this.$store.getters.schoolId;\n    this.requestCoopeUnitJsonData();\n  },\n  methods: {\n    handleSizeChange: function handleSizeChange(val) {\n      this.pagesize = val;\n      this.requestCoopeUnitJsonData();\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.requestCoopeUnitJsonData();\n    },\n    // 改变企业状态\n    changeUnitStatus: function changeUnitStatus(index, row, e) {\n      var _this = this;\n\n      this.$axios.post(this.$global.sApi + '/addcom', JSON.stringify({\n        'unitId': row.id\n      })).then(function (res) {\n        _this.$message({\n          message: '操作成功',\n          type: 'success'\n        });\n      });\n    },\n    // 获取企业列表\n    requestCoopeUnitJsonData: function requestCoopeUnitJsonData() {\n      var _this2 = this;\n\n      this.$axios.post(this.$global.sApi + '/addcom', JSON.stringify({\n        'current_page': this.currentPage,\n        'perpage': this.pagesize,\n        'type': 3\n      })).then(function (res) {\n        var json = res.data.data.data;\n        _this2.total = res.data.data.currentPage;\n\n        if (json.length > 0) {\n          _this2.classesJsonData = json;\n        }\n      });\n    },\n    // 显示编辑Dialog\n    showModifyModal: function showModifyModal(index, row, flag) {\n      this.insertOrModifyModel = flag;\n\n      if (this.insertOrModifyModel === 1) {\n        this.unitForm.unitId = row.id;\n        this.unitForm.unitName = row.comname; // this.unitForm.unitManager = row\n\n        this.unitForm.unitScale = row.num; // this.unitForm.unitMsg = row\n\n        this.unitForm.unitAccount = row.usernumber; // this.unitForm.unitPassword = row\n      }\n\n      this.insertDialog = true;\n    },\n    // 提交\n    submitForm: function submitForm(formName) {\n      var _this3 = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          if (_this3.insertOrModifyModel === 0) {\n            _this3.insertClassesApi(formName);\n          } else {\n            _this3.modifyClassesApi(formName);\n          }\n        } else {\n          return false;\n        }\n      });\n    },\n    // 显示查看Dialog\n    showLookModal: function showLookModal(index, row) {\n      this.unitForm.unitImg = row;\n      this.unitForm.unitName = row.comname;\n      this.unitForm.unitManager = row;\n      this.unitForm.unitScale = row.num;\n      this.unitForm.unitMsg = row;\n      this.unitForm.unitAccount = row.usernumber;\n      this.unitForm.unitPassword = row.userpass;\n      this.lookDialog = true;\n    },\n    // 添加企业\n    insertClassesApi: function insertClassesApi(formName) {\n      var _this4 = this;\n\n      this.$axios.post(this.$global.sApi + '/addcom', JSON.stringify({\n        'usernumber': this.unitForm.unitAccount,\n        'userpass': this.unitForm.unitPassword,\n        'brief': this.unitForm.unitMsg,\n        'work': this.unitForm.unitManager,\n        'comname': this.unitForm.unitName,\n        'num': this.unitForm.unitScale,\n        'imageUrl': this.unitForm.unitImg,\n        'type': 1\n      })).then(function (res) {\n        _this4.insertDialog = false;\n\n        _this4.$refs[formName].resetFields();\n\n        _this4.$message({\n          message: '添加成功',\n          type: 'success'\n        });\n\n        _this4.requestCoopeUnitJsonData();\n      });\n    },\n    // 编辑企业\n    modifyClassesApi: function modifyClassesApi(formName) {\n      var _this5 = this;\n\n      this.$axios.post(this.$global.sApi + '/addcom', JSON.stringify({\n        'userpass': this.unitForm.unitPassword,\n        'brief': this.unitForm.unitMsg,\n        'work': this.unitForm.unitManager,\n        'comname': this.unitForm.unitName,\n        'num': this.unitForm.unitScale,\n        'id': this.unitForm.unitId,\n        'type': 2\n      })).then(function (res) {\n        console.log(res);\n        _this5.insertDialog = false;\n        _this5.unitForm = {};\n\n        _this5.$refs[formName].resetFields();\n\n        _this5.$message({\n          message: '编辑成功',\n          type: 'success'\n        });\n\n        _this5.requestCoopeUnitJsonData();\n      });\n    },\n    // 上传图片\n    handleAvatarSuccess: function handleAvatarSuccess(res, file) {\n      this.unitForm.unitImg = URL.createObjectURL(file.raw);\n    },\n    beforeAvatarUpload: function beforeAvatarUpload(file) {\n      var isJPG = file.type === 'image/jpeg';\n      var isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG) {\n        this.$message.error('上传头像图片只能是 JPG 格式!');\n      }\n\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!');\n      }\n\n      return isJPG && isLt2M;\n    }\n  }\n};\nexports.default = _default;",null]}